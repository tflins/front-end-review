# vue 双向绑定原理

vue 的双向绑定原理主要是通过数据劫持结合发布者-订阅模式来实现的。vue 通过 ES5 的提供的一个方法 Object.defindProperty 来进行数据劫持，这个方法可以修改属性的默认特征，为需要监听的数据设置 set 和 get 方法。当读取变量中的数据时会触发 get 方法，对变量进行数据存储的时候会触发 set 方法。

对于设置了 set 和 get 的对象，在 vue 中可以称之为响应式对象。数据改变时，会触发 set 方法，在 set 方法中调用一系列的更新函数，可以实现 data 更新视图 view 。

get 进行依赖收集添加依赖，set 发送通知触发更新。

在 vue 的源码中，core 文件夹中有一个 observer 文件夹，这个文件夹就是主要数据监听相关的代码。这里面有一个 Observer 类，相当于一个监听器，用来劫持并监听所有的属性。如果数据改变就会通知给订阅者。

还有一个 Watcher 相当于订阅者，可以在收到属性变化的通知的时候，执行相应的函数，更新视图。

一个消息订阅器 Dep 用来容纳订阅者，主要负责收集订阅者，vue 触发更新就需要知道有哪些数据是否被使用，而 Dep 就是用来做这个的，这个中机制被称为依赖收集。
